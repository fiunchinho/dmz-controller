#!/usr/bin/env bash

set -ev

glide install

gometalinter.v1 --install --update
gometalinter.v1 --checkstyle --vendor --disable-all -E vet -E goconst -E golint -E goimports -E misspell --deadline=50s -j 11 "${PWD}/..."

CGO_ENABLED=0 GOOS=linux go build -o app
CGO_ENABLED=0 GOOS=linux go test -v $(glide novendor) | tee /dev/tty | go-junit-report > junit-report.xml;
